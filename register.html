<!DOCTYPE html>
<html lang="en">
<head>
  <title>HTML Register Form</title>
  <link rel="stylesheet" href="myStyle.css" />
</head>

<body>
  <div class="main">
    <h1>Kid Control Register Page</h1>
    <h3>Create a new account</h3>
    <form action="" method="POST" name="register-form" onsubmit="return confirmSubmission()">
      <div class="form-group">
          <input type="tel" id="new_phonenumber" name="new_phonenumber" class="form-control" placeholder="Enter Your Phone Number" required>
      </div>
      <div class="form-group password-container">
          <input type="password" id="new_password" name="new_password" class="form-control" placeholder="Enter Your Password" required>
          <i class="fa fa-eye" id="toggleNewPassword"></i>
      </div>
      <button type="submit" class="btn register-btn">Register</button>
      <a href="login.html" class="login-link">Back to Login</a>
    </form>
  </div>
  <script>
     document.addEventListener('DOMContentLoaded', function () {
            const toggleNewPassword = document.querySelector('#toggleNewPassword');
            const newPassword = document.querySelector('#new_password');

            toggleNewPassword.addEventListener('click', function () {
                // Toggle the type attribute
                const type = newPassword.getAttribute('type') === 'password' ? 'text' : 'password';
                newPassword.setAttribute('type', type);

                // Toggle the eye icon
                this.classList.toggle('fa-eye-slash');
            });
        });

        function confirmSubmission() {
            alert('Account created successfully!');
            return true;
        }

        const scriptURL = 'https://script.google.com/macros/s/AKfycbyawbTqq54nZAFUfC7v4DrkH0ZQQKEypvco-R5gwBWGiBPpueQM566gwdWF-XbaxIPb/exec'

        const form = document.forms['contact-form']

        form.addEventListener('submit', e => {
            e.preventDefault()
            fetch(scriptURL, { method: 'POST', body new FormData(form)})
            .then(response => alert("Successfully"))
            .then(() => { window.location.reload(); })
            .catch(error => console.error('Error!', error.message))
        })
  </script>
</body>
</html>
